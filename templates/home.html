<!doctype html>  
<html lang="en">  
  <head>  
    <meta charset="utf-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1">  
    <link rel="stylesheet" type="text/css" href="/Grade-Connect-amankwah-clinton/CSS/login.css" />  
    <title>Grade Connect</title>  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>  
    <style>  
      body {  
        height: 100vh;  
        display: flex;  
        align-items: center;  
        justify-content: center;  
      }  
        
      .form-control {  
        width: 100%;  
      }  
    </style>  
 </head>  
  <body>  
    <div class="signupcontainer">  
      <h1>Grade Connect Login</h1>
      <form id="loginForm" method="POST">  
        <div class="row mb-3">  
          <label for="inputEmail3" class="col-sm-3 col-form-label">Email</label>  
          <div class="col-sm-9">  
            <input type="email" class="form-control" id="username" required>  
          </div>  
        </div>  
        <div class="row mb-3">  
          <label for="inputPassword3" class="col-sm-3 col-form-label">Password</label>  
          <div class="col-sm-9">  
            <input type="password" class="form-control" id="password" required>  
          </div>  
        </div>  
  
        <button type="submit" class="btn btn-primary" value="Login">Sign in</button>  
      </form>  
      <p>Don't have an account? <a href="/signup">Sign up</a></p>
    </div>  
      

    <script>  
      // Add event listener to the login form  
      document.getElementById("loginForm").addEventListener("submit", function(event) {  
          event.preventDefault(); // Prevent form submission  

          // Get the form values  
          var username = document.getElementById("username").value;  
          var password = document.getElementById("password").value;  

          // Create a new FormData object  
          var formData = new FormData();  
          formData.append("username", username);  
          formData.append("password", password);  

          // Send a POST request to the login route  
          fetch("/login", {  
              method: "POST",  
              body: formData  
          })  
          .then(response => response.json())  
          .then(data => {  
              if (data.message === "Login successful") {  
                  // Redirect to the home page  
                  window.location.href = "/";  
              } else {  
                  // Display an error message  
                  alert("Invalid username or password");  
              }  
          })  
          .catch(error => {  
              console.error("Error:", error);  
          });  
      });  
    </script>  
      
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>  
  </body>  
</html>  
